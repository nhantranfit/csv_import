<div class="container mt-4">
  <h1>CSV Import Example</h1>
  <div data-controller="csv-import">
    <%= form_with url: import_csv_materials_path, method: :post, html: { multipart: true }, local: false, class:'form-inline d-flex', data: { action: "submit->csv-import#import" } do |form| %>

      <div class="form-group w-25">
        <%= form.file_field :file, class: "form-control ", id: "csv-file-input", data: { target: "csv-import.fileInput", action: "change->csv-import#enableButton" } %>
      </div>

      <div class="form-group float-end" style="margin-left: 5px;">
        <%= button_tag "Import CSV", class: "btn btn-primary", id: "import-button", disabled: true, data: { target: "csv-import.importButton" } %>
       <button class="btn btn-danger" data-action="click->csv-import#deleteAllImportedMaterials" data-materials-target="deleteButton">Delete All</button>
      </div>
    <% end %>
  </div>

  <table class="table table-striped table-bordered mt-5">
  <thead>
    <tr>
      <th>品目名1</th>
      <th>品目名2</th>
      <th>標準単位</th>
      <th>標準単価</th>
      <th>Created at</th>
      <th>Created by</th>
      <th>Updated at </th>
      <th>Updated by</th>
    </tr>
  </thead>
  <tbody>
    <% @materials.each do |material| %>
    <tr>
      <td><%= material[:material_name] %></td>
      <td><%= material[:material_item_name2] %></td>
      <td><%= material[:standard_unit]%></td>
      <td><%= material[:standard_unit_cost]%></td>
      <td><%= material[:created_at] %></td>
      <td><%= material[:created_by] %></td>
      <td><%= material[:updated_at] %></td>
      <td><%= material[:updated_by] %></td>
    </tr>
    <% end %>
  </tbody>
</table>
<%=  pagy_nav(@pagy).html_safe  %>

</div>

